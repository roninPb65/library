<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Devices</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>Devices Overview</h1>
    <canvas id="devicesChart" width="600" height="400"></canvas>

    <script>
        const ctx = document.getElementById('devicesChart').getContext('2d');
        const devicesChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['wlan0', 'wlan1', 'wlan2'],
                datasets: [{
                    label: 'Alerts per Interface',
                    data: [0,0,0],
                    backgroundColor: ['red','blue','green']
                }]
            },
            options: { responsive: true, animation: false }
        });

        const es = new EventSource("/devices_data");
        es.onmessage = function(event) {
            const data = JSON.parse(event.data.replace(/'/g,'"'));
            devicesChart.data.datasets[0].data = [data.wlan0, data.wlan1, data.wlan2];
            devicesChart.update();
        };
    </script>
</body>
</html>
